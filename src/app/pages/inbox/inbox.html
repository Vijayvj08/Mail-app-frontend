<div class="container mt-5">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary fw-bold">
      <i class="bi bi-inbox-fill"></i> Inbox
    </h2>

    <div>
      <a routerLink="/compose" class="btn btn-success me-2 shadow-sm">
        <i class="bi bi-pencil-square"></i> Compose
      </a>
      <a routerLink="/sent" class="btn btn-secondary me-2 shadow-sm">
        <i class="bi bi-send"></i> Sent Items
      </a>
      <button (click)="authService.logout()" class="btn btn-outline-danger shadow-sm">
        <i class="bi bi-box-arrow-right"></i> Logout
      </button>
    </div>
  </div>

  <div class="card shadow border-0 rounded-3">
    <div class="card-body p-0">

      <table class="table table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th scope="col" class="ps-4" width="25%">From</th>
            <th scope="col" width="50%">Subject</th>
            <th scope="col" class="text-end" width="15%">Date</th>
            <th scope="col" class="text-center" width="10%">Action</th>
          </tr>
        </thead>

        <tbody>
          @for (mail of mails; track mail.id) {
          <tr (click)="openMail(mail.id)" style="cursor: pointer;">

            <td class="ps-4 fw-bold text-dark">{{ mail.fromEmail }}</td>

            <td>
              <span class="fw-semibold text-primary">{{ mail.subject }}</span>
              <span class="text-muted small"> - {{ mail.body | slice:0:40 }}...</span>
            </td>

            <td class="text-end text-muted small">
              {{ mail.sentAt | date:'MMM d, h:mm a' }}
            </td>

            <td class="text-center">
              <button (click)="deleteMail(mail.id);$event.stopPropagation()" class="btn btn-danger"
                title="Delete Mail">
                Delete
              </button>
            </td>

          </tr>
          } @empty {
          <tr>
            <td colspan="4" class="text-center py-5 text-muted bg-light">
              <i class="bi bi-envelope-open fs-1 d-block mb-2"></i>
              <h5>No mails found!</h5>
              <p>Your inbox is empty.</p>
            </td>
          </tr>
          }
        </tbody>
      </table>

    </div>
  </div>

</div>